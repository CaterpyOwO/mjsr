(()=>{"use strict";var __webpack_modules__={889:(t,e,i)=>{var r={};i.r(r),i.d(r,{BLINN_PHONG:()=>w,CLOCKWISE:()=>y,COUNTER_CLOCKWISE:()=>b,LINES:()=>f,NONE:()=>g,PHONG:()=>_,POINTS:()=>d,TRIANGLES:()=>v});let s="undefined"!=typeof Float32Array?Float32Array:Array;function o(){let t=new s(16);return s!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function n(t,e,i){let r=Math.sin(i),s=Math.cos(i),o=e[0],n=e[1],a=e[2],h=e[3],l=e[8],c=e[9],u=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*s-l*r,t[1]=n*s-c*r,t[2]=a*s-u*r,t[3]=h*s-m*r,t[8]=o*r+l*s,t[9]=n*r+c*s,t[10]=a*r+u*s,t[11]=h*r+m*s,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});class a{constructor(t=[0,0,0],e=[0,0,0],i=45){return this.pos=t,this.rot=e,this.fov=i,this.model=o(),this.view=o(),this.projection=o(),this}vp(t){let e=function(t,e,i,r,s){let o,n=1/Math.tan(e/2);return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,o=1/-99.9,t[10]=100.1*o,t[14]=20*o,t}(o(),this.fov*(Math.PI/180),t.width/t.height),i=o();return function(t,e,i){let r=Math.sin(i),s=Math.cos(i),o=e[4],n=e[5],a=e[6],h=e[7],l=e[8],c=e[9],u=e[10],m=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*s+l*r,t[5]=n*s+c*r,t[6]=a*s+u*r,t[7]=h*s+m*r,t[8]=l*s-o*r,t[9]=c*s-n*r,t[10]=u*s-a*r,t[11]=m*s-h*r}(i,i,this.rot[0]),n(i,i,this.rot[1]),function(t,e,i){let r,s,o,n,a,h,l,c,u,m,p,d,f=i[0],v=i[1],g=i[2];e===t?(t[12]=e[0]*f+e[4]*v+e[8]*g+e[12],t[13]=e[1]*f+e[5]*v+e[9]*g+e[13],t[14]=e[2]*f+e[6]*v+e[10]*g+e[14],t[15]=e[3]*f+e[7]*v+e[11]*g+e[15]):(r=e[0],s=e[1],o=e[2],n=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],m=e[9],p=e[10],d=e[11],t[0]=r,t[1]=s,t[2]=o,t[3]=n,t[4]=a,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=m,t[10]=p,t[11]=d,t[12]=r*f+a*v+u*g+e[12],t[13]=s*f+h*v+m*g+e[13],t[14]=o*f+l*v+p*g+e[14],t[15]=n*f+c*v+d*g+e[15])}(i,i,this.pos),function(t,e,i){let r=e[0],s=e[1],o=e[2],n=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],m=e[9],p=e[10],d=e[11],f=e[12],v=e[13],g=e[14],_=e[15],w=i[0],b=i[1],y=i[2],E=i[3];return t[0]=w*r+b*a+y*u+E*f,t[1]=w*s+b*h+y*m+E*v,t[2]=w*o+b*l+y*p+E*g,t[3]=w*n+b*c+y*d+E*_,w=i[4],b=i[5],y=i[6],E=i[7],t[4]=w*r+b*a+y*u+E*f,t[5]=w*s+b*h+y*m+E*v,t[6]=w*o+b*l+y*p+E*g,t[7]=w*n+b*c+y*d+E*_,w=i[8],b=i[9],y=i[10],E=i[11],t[8]=w*r+b*a+y*u+E*f,t[9]=w*s+b*h+y*m+E*v,t[10]=w*o+b*l+y*p+E*g,t[11]=w*n+b*c+y*d+E*_,w=i[12],b=i[13],y=i[14],E=i[15],t[12]=w*r+b*a+y*u+E*f,t[13]=w*s+b*h+y*m+E*v,t[14]=w*o+b*l+y*p+E*g,t[15]=w*n+b*c+y*d+E*_,t}(o(),e,i)}modelit(){let t=this.model;return function(t,e){let i=e[0],r=e[1],s=e[2],o=e[3],n=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],m=e[10],p=e[11],d=e[12],f=e[13],v=e[14],g=e[15],_=i*a-r*n,w=i*h-s*n,b=i*l-o*n,y=r*h-s*a,E=r*l-o*a,k=s*l-o*h,L=c*f-u*d,P=c*v-m*d,x=c*g-p*d,M=u*v-m*f,A=u*g-p*f,S=m*g-p*v,I=_*S-w*A+b*M+y*x-E*P+k*L;I&&(I=1/I,t[0]=(a*S-h*A+l*M)*I,t[1]=(s*A-r*S-o*M)*I,t[2]=(f*k-v*E+g*y)*I,t[3]=(m*E-u*k-p*y)*I,t[4]=(h*x-n*S-l*P)*I,t[5]=(i*S-s*x+o*P)*I,t[6]=(v*b-d*k-g*w)*I,t[7]=(c*k-m*b+p*w)*I,t[8]=(n*A-a*x+l*L)*I,t[9]=(r*x-i*A-o*L)*I,t[10]=(d*E-f*b+g*_)*I,t[11]=(u*b-c*E-p*_)*I,t[12]=(a*P-n*M-h*L)*I,t[13]=(i*M-r*P+s*L)*I,t[14]=(f*w-d*y-v*_)*I,t[15]=(c*y-u*w+m*_)*I)}(t,t),function(t,e){if(t===e){let i=e[1],r=e[2],s=e[3],o=e[6],n=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=s,t[13]=n,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(t,t),t}}class h{constructor(t={width:640,height:480},e=document.body,i=document.createElement("canvas")){return this.canvas=i,this.canvas.width=t.width,this.canvas.height=t.height,this.gl=this.canvas.getContext("webgl"),this.parent=e,e instanceof HTMLElement&&e.appendChild(this.canvas),this}fullscreen(){this.canvas.width=innerWidth,this.canvas.height=innerHeight,window.addEventListener("resize",(()=>{this.canvas.width=innerWidth,this.canvas.height=innerHeight}));let t=document.createElement("style");return t.innerText="html,body{margin:0;overflow:hidden}",document.head.appendChild(t),this}fillParent(){return this.canvas.width=this.parent.clientWidth,this.canvas.height=this.parent.clientHeight,window.addEventListener("resize",(()=>{this.canvas.width=this.parent.clientWidth,this.canvas.height=this.parent.clientHeight})),this}square(t){return this.canvas.width=t,this.canvas.height=t,this}rect(t,e){return this.canvas.width=t,this.canvas.height=e,this}}const l={None:class{update(){}setAttributes(){}setupMovement(){}},FirstPerson:class{constructor(){this.keys=[]}setAttributes(t,e){this.screen=t,this.camera=e}setupMovement(){let{canvas:t}=this.screen;window.addEventListener("keydown",(t=>this.keys[t.key.toLowerCase()]=!0)),window.addEventListener("keyup",(t=>this.keys[t.key.toLowerCase()]=!1));let e=t=>Math.abs(t.movementX)>50||Math.abs(t.movementY)>50?void 0:this.mouseRotation([t.movementX,t.movementY]);t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,t.onclick=()=>t.requestPointerLock();let i=()=>{document.pointerLockElement===t||document.mozPointerLockElement===t?t.onmousemove=e:t.onmousemove=null};document.addEventListener("pointerlockchange",i),document.addEventListener("mozpointerlockchange",i)}mouseRotation(t,e=3){let[i,r]=t;i/=e*=100,r/=e,this.camera.rot[0]+r<Math.PI/2&&this.camera.rot[0]+r>-Math.PI/2&&(this.camera.rot[0]+=r),this.camera.rot[1]+=i}update(t){let{canvas:e}=this.screen;if(document.pointerLockElement==e||document.mozPointerLockElement==e){let e=t/160;this.keys.q&&(this.camera.pos[1]+=e),this.keys.e&&(this.camera.pos[1]-=e);let i=e*Math.sin(this.camera.rot[1]),r=e*Math.cos(this.camera.rot[1]);this.keys.w&&(this.camera.pos[0]+=i,this.camera.pos[2]-=r),this.keys.s&&(this.camera.pos[0]-=i,this.camera.pos[2]+=r),this.keys.a&&(this.camera.pos[0]-=r,this.camera.pos[2]-=i),this.keys.d&&(this.camera.pos[0]+=r,this.camera.pos[2]+=i)}}},ModelRotate:class{constructor(){this.keys=[]}setAttributes(t,e){this.screen=t,this.camera=e}setupMovement(){let{canvas:t}=this.screen,e=[0,0];const i=t=>this.mouseRotation([t.movementX,t.movementY]);t.onmousedown=()=>t.onmousemove=i,window.onmouseup=()=>t.onmousemove=null,t.addEventListener("touchstart",(t=>e=[t.touches[0].screenX,t.touches[0].screenY]),{passive:!0}),t.addEventListener("touchmove",(t=>(this.mouseRotation([-(e[0]-t.touches[0].screenX),e[1]-t.touches[0].screenY]),e=[t.touches[0].screenX,t.touches[0].screenY])),{passive:!0}),t.addEventListener("touchend",(()=>(t.ontouchmove=null,e=[0,0])))}mouseRotation(t){n(this.camera.model,this.camera.model,.01*t[0])}update(){}}};class c{constructor(t){return this.gl=t,this.shaders=[],this.glprogram=null,this.locations={},this}frag(t){this.shader(t,this.gl.FRAGMENT_SHADER)}vert(t){this.shader(t,this.gl.VERTEX_SHADER)}shader(t,e){if(t=t.raw?t.raw.join(""):t,!e){let i=new RegExp("// ?vert(ex)?( |_|-)shader","i"),r=new RegExp("// ?frag(ment)?( |_|-)shader","i");if(i.test(t))e=this.gl.VERTEX_SHADER;else{if(!r.test(t))throw new Error("No shader type found.");e=this.gl.FRAGMENT_SHADER}}let i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return this.shaders.push(i),i;console.error(`Error in shader:\n${t.split(/\n/).map(((t,e)=>`${e+1}: ${t}`)).join("\n")}`);let r=new Error(this.gl.getShaderInfoLog(i));throw this.gl.deleteShader(i),r}program(...t){if(0==t.length&&(t=this.shaders),0==t.length)throw new Error("No shaders were supplied.");let e=this.gl.createProgram();for(let i of t)this.gl.attachShader(e,i);if(this.gl.linkProgram(e),this.gl.getProgramParameter(e,this.gl.LINK_STATUS))return this.glprogram=e,e;let i=new Error(this.gl.getProgramInfoLog(e));throw this.gl.deleteProgram(e),i}buffers(t,e={}){if(0==t.length)throw new Error("No buffers were supplied.");for(let i in t){let r=t[i];this.buffer32f(r,this.gl.ARRAY_BUFFER);let s=this.gl.getAttribLocation(this.glprogram,i);this.gl.enableVertexAttribArray(s),e[i]?this.gl.vertexAttribPointer(s,e[i],this.gl.FLOAT,!1,0,0):this.gl.vertexAttribPointer(s,3,this.gl.FLOAT,!1,0,0)}}uniform3fv(t,e){return this.gl.uniform3fv(this._location(t),e)}uniformMatrix4fv(t,e,i){return this.gl.uniformMatrix4fv(this._location(t),e,i)}uniform1f(t,e){return this.gl.uniform1f(this._location(t),e)}_location(t){return this.locations[t]||(this.locations[t]=this.gl.getUniformLocation(this.glprogram,t)),this.locations[t]}buffer32f(t,e){let i=this._bufferInit(e);return this.gl.bufferData(e,new Float32Array(t),this.gl.STATIC_DRAW),i}buffer16u(t,e){let i=this._bufferInit(e);return this.gl.bufferData(e,new Uint16Array(t),this.gl.STATIC_DRAW),i}buffer32u(t,e){let i=this._bufferInit(e);return this.gl.bufferData(e,new Uint32Array(t),this.gl.STATIC_DRAW),i}_bufferInit(t){const e=this.gl.createBuffer();return this.gl.bindBuffer(t,e),e}}var u=i(930);function m(t={primitive:2,lighting:!0}){return(0,u.d)("\n    precision mediump float;\n\n    attribute vec4 position;\n    attribute vec3 normal;\n\n    varying vec3 v_colour;\n    varying vec3 v_normal;\n    varying float v_shinyness;\n\n\tvarying vec3 v_fragPos, v_viewPos;\n\n    uniform mat4 u_vp, u_model, u_modelit;\n    uniform vec3 u_pos;\n\n    void main() {\n        #if (options.primitive == 2 && options.mode !== 0) \n            v_fragPos = vec3(u_model * position);\n            v_viewPos = u_pos;\n            v_normal = mat3(u_modelit) * normal;\n        #endif\n\n        #if (options.primitive == 0)\n            gl_PointSize = 5.0;\n        #endif\n\n        mat4 mvp = u_vp * u_model;\n        gl_Position = mvp * position;\n    }",t)}function p(t={primitive:2,mono:!1,mode:0,posterization:!1}){return(0,u.d)("\n\tprecision mediump float;\n\n\tvarying vec3 v_normal;\n\t\n\tuniform vec3 u_colour;\n\tuniform float u_shinyness;\n\n\t#if (options.mode !== 0)\n\t\tvarying vec3 v_fragPos, v_viewPos;\n\n\t\tstruct Light {\n\t\t\tvec3 position;\n\t\t\tvec3 colour;\n\t\t};\n\t\n\t\tuniform Light light;\n\t#endif\n\n\t#if options.posterization\n\t\tuniform float p_gamma;\n\t\tuniform float p_colours;\n\t#endif\n\n\tvoid main() {\n\t\tgl_FragColor = vec4(u_colour, 1.0);\n\n\t\t#if (options.mode !== 0)\n\t\t\t\n    vec3 normal = normalize(v_normal);\n    vec3 lightd = normalize(light.position - v_fragPos);\n\n    // specular\n    float strength = 0.3;\n    vec3 viewd = normalize(v_viewPos - v_fragPos);\n    vec3 reflectd = reflect(-lightd, normal);\n\n    #if (options.mode == 2)\n        vec3 halfwayd = normalize(lightd + viewd);\n\n        float sp = pow(max(dot(normal, halfwayd), 0.0), u_shinyness);\n        vec3 specular = light.colour * sp;\n    #else\n        float sp = pow(max(dot(viewd, reflectd), 0.0), u_shinyness);\n        vec3 specular = strength * sp * light.colour; \n    #endif\n\n    // diffuse\n    float df = max(dot(normal, lightd), 0.0);\n    vec3 diffuse = df * light.colour;\n\n    // ambient\n    vec3 ambient = 0.1 * light.colour;\n\n\n    gl_FragColor = vec4((ambient + diffuse + specular) * gl_FragColor.rgb, 1.0);\n\n\t\t#endif\n\n\t\t#if options.mono\n\t\t\t\n    float lum = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;\n    vec2 monoColour = vec2(lum, 1.0);\n\n    gl_FragColor = monoColour.xxxy;\n\n\t\t#endif\n\n\t\t#if options.posterization\n\t\t\t\n    vec3 c = gl_FragColor.rgb;\n    c = pow(c, vec3(p_gamma, p_gamma, p_gamma));\n    c = c * p_colours;\n    c = floor(c);\n    c = c / p_colours;\n    c = pow(c, vec3(1.0/p_gamma));\n\n    gl_FragColor = vec4(c, 1.0);\n\n\t\t#endif\n\t}",t)}const d=0,f=1,v=2,g=0,_=1,w=2,b=0,y=1;function E(t){try{let e=[t[1][0]-t[0][0],t[1][1]-t[0][1],t[1][2]-t[0][2]],i=[t[2][0]-t[0][0],t[2][1]-t[0][1],t[2][2]-t[0][2]];return function(t){let e=Math.sqrt(t[0]**2+t[1]**2+t[2]**2);return[t[0]/=e,t[1]/=e,t[2]/=e]}([e[1]*i[2]-e[2]*i[1],e[2]*i[0]-e[0]*i[2],e[0]*i[1]-e[1]*i[0]])}catch(t){throw t}}function k(t,e,i){return Math.max(Math.min(t,i),e)}class L{constructor(t,e=32){if("string"==typeof t)this.colour=function(t,e){if(t=t.trim(),!e)if(/rgb\([^\)]*\)/.test(t))e="rgb";else{if(!/(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\b/i.test(t))throw new Error(`${t} is not a valid colour.`);e="hex"}switch(e){case"hex":return[...(t=3==(t=t.substr(1)).length?t.split("").reduce(((t,e)=>t.push(e+e)&&t),[]):t.match(/.{1,2}/g)).map((t=>k(parseInt(t,16)/255,0,1)))];case"rgb":return[...(t=(t=t.substr(4).slice(0,-1)).split(",")).map((t=>k(parseInt(t)/255,0,1)))];default:throw new Error(`${e} is not a valid colour type.`)}}(t);else{if(!Array.isArray(t))throw new Error(`${t} is not a valid colour.`);this.colour=t}this.shinyness=e}}class P{constructor(t=[0,0,0],e=v,i=!1){switch(this.coords=t,this.primitive=e,this.verts=[],this.edges=[],this.faces=[],e){case v:i?this.materials=[]:this.colours=[];break;case f:case d:this.colours=[];break;default:throw new Error(`The primitive ${e} is not a valid primitive`)}}generateMesh(){const t=["points","lines","triangles"];let e=-1;if("string"==typeof this.primitive&&void 0!==t.includes(this.primitive))e=t.indexOf(this.primitive);else{if("number"!=typeof this.primitive)throw new Error("No primitive type supplied.");e=this.primitive}let i=[];if(this.materials)for(let t in this.materials)i[t]={material:this.materials[t],data:{position:[],normal:[],primitive:e}};else for(let t in this.colours)i[t]={material:new L(this.colours[t]),data:{position:[],normal:[],primitive:e}};switch(e){case 0:for(let t of this.verts)i[t[3]].data.position.push(t[0],t[1],t[2]);break;case 1:for(let t of this.edges)i[t[2]].data.position.push(...this.verts[t[1]],...this.verts[t[0]]);break;case 2:for(let t of this.faces){let e=E([this.verts[t[0]],this.verts[t[1]],this.verts[t[2]]]);i[t[3]].data.position.push(...this.verts[t[2]],...this.verts[t[1]],...this.verts[t[0]]),i[t[3]].data.normal.push(...e,...e,...e)}break;default:throw new Error("Invalid primitive")}return i}static from(t){const e=new P,i={0:["coords","verts","colours","primitive"],1:["coords","verts","edges","colours","primitive"],2:["coords","verts","faces","colours","primitive"]},r=["points","lines","triangles"];let s=-1;if("string"==typeof t.primitive&&void 0!==r.includes(t.primitive))s=r.indexOf(t.primitive);else{if("number"!=typeof t.primitive)throw new Error("No primitive type supplied.");s=t.primitive}for(let r of i[s]){if(void 0===t[r]){if("colours"==r&&t.materials)continue;throw new Error(`Object doesn't have required property ${r}.`)}e[r]=t[r]}return e.primitive=s,e}}function x(t,e){if(t)return!0;throw new Error("Assertion failed: "+e)}t=i.hmd(t);const M={VERSION:"v0.9.5-alpha",...r,Renderer:class{constructor(t=new h,e=new a,i=new l.None,r={mono:!1,lighting:w,culling:!0,posterization:!1}){return this.options={},this.options.mono=r.mono??!1,this.options.lighting=r.lighting??w,this.options.culling=r.culling??!0,this.options.posterization=r.posterization??!1,this.lighting={colour:[1,1,1],position:[0,-2,-5]},this.posterization={colours:5,gamma:1},this.screen=t,this.camera=e,x(i.setAttributes,"Input handler doesn't have a .setAttributes() method.")&&i.setAttributes(t,e),x(i.setupMovement,"Input handler doesn't have a .setupMovement() method."),x(i.update,"Input handler doesn't have a .update() method."),this.input=i,this.dt=0,this.last=0,this}setup(...t){this.scenes=[],this._scene=0,this.primitives=new Set,this.shaders={};for(let e in t){let i=t[e],r=[];x(i.length,`Scene ${e} has no objects.`);for(let t of i){x("object"==typeof t,"Invalid object in scene."),t.generateMesh||(t=P.from(t));let e=t.generateMesh(),i=e[0].data.primitive;this.primitives.add(i),console.log(),r.push(...e)}this.scenes.push(r)}const{gl:e}=this.screen;for(let t of this.primitives){let i=new c(e),r=2==t?this.options.lighting:0;i.vert(m({mode:r,primitive:t})),i.frag(p({mode:r,primitive:t,mono:this.options.mono,posterization:this.options.posterization})),i.program(),this.shaders[t]=i}e.clearColor(1,1,1,1),e.enable(e.DEPTH_TEST),this.options.culling&&e.enable(e.CULL_FACE),this.input.setupMovement()}draw(){const{gl:t}=this.screen;let e=[t.POINTS,t.LINES,t.TRIANGLES];t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);for(let e in this.shaders){let i=this.shaders[e];t.useProgram(i.glprogram),i.uniform3fv("u_pos",this.camera.pos),i.uniformMatrix4fv("u_modelit",!1,this.camera.modelit()),i.uniformMatrix4fv("u_model",!1,this.camera.model),i.uniformMatrix4fv("u_vp",!1,this.camera.vp(this.screen.canvas)),this.options.lighting!==g&&(i.uniform3fv("light.position",this.lighting.position),i.uniform3fv("light.colour",this.lighting.colour)),this.options.posterization&&(i.uniform1f("p_gamma",this.posterization.gamma),i.uniform1f("p_colours",this.posterization.colours)),t.useProgram(null)}for(let i of this.scenes[this._scene]){const r=i.data.primitive,s=this.shaders[r];t.useProgram(s.glprogram),s.uniform1f("u_shinyness",i.material.shinyness),s.uniform3fv("u_colour",i.material.colour);let o={position:i.data.position};2==r&&(o.normal=i.data.normal),s.buffers(o),t.drawArrays(e[r],0,i.data.position.length/(r+1)),t.useProgram(null)}}update(t){x("number"==typeof t,"Invalid timestamp."),this.dt=this.last-t,this.last=t,this.input.update(this.dt)}get scene(){return this._scene}set scene(t){x("number"==typeof t&&this.scenes[t],"Invalid scene index.")&&(this._scene=t)}},Screen:h,Camera:a,Input:l,Geometry:{Cube:class{constructor(t=[0,0,0]){let[e,i,r]=t;this.coords=t,this.primitive="triangles",this.verts=[[e-1,i-1,r-1],[e+1,i-1,r-1],[e+1,i+1,r-1],[e-1,i+1,r-1],[e-1,i-1,r+1],[e+1,i-1,r+1],[e+1,i+1,r+1],[e-1,i+1,r+1]],this.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]],this.faces=[[0,1,2,0],[2,3,0,0],[1,5,6,1],[6,2,1,1],[4,5,1,2],[1,0,4,2],[6,5,4,3],[4,7,6,3],[7,4,0,4],[0,3,7,4],[2,6,7,5],[7,3,2,5]],this.colours=["#0ff","#0f0","#f0f","#00f","#ff0","#f00"]}},Plane:class{constructor(t=[0,0,0]){this.coords=t;let[e,i,r]=t;this.primitive="triangles",this.verts=[[e-1,i,r-1],[e-1,i,r+1],[e+1,i,r+1],[e+1,i,r-1]],this.faces=[[0,1,2,0],[2,3,0,0],[2,1,0,1],[0,3,2,1]],this.colours=["#faf","#aff"]}}},Material:L,Object3d:P,OBJLoader:class{constructor(t,e=y,i=new L("#fff",128)){this.url=t,this.object=new P([0,0,0],v,!0),this.normals=e,this.object.materials.push(i)}async load(){let t=(await this.loadFile()).split(/\n/);for(let e of t)switch(e=e.trim().split(/\s/),e.shift()){case"#":break;case"v":this.object.verts.push(e.map(((t,e)=>parseFloat(t)+this.object.coords[e])));break;case"f":e=e.map((t=>parseInt(t.split(/\//)[0])-1)),this.normals==b?this.object.faces.push([e[0],e[1],e[2],0]):this.object.faces.push([e[2],e[1],e[0],0])}if(!this.object.verts.length)throw new Error("Object doesn't have any vertices.");if(!this.object.faces.length)throw new Error("Object doesn't have any faces.");return this.object}async loadFile(){try{return await(await fetch(this.url)).text()}catch(t){throw t}}}};"function"==typeof define&&i.amdO?define([],(()=>M)):"object"==typeof exports?t.exports=M:window.mjsr=M,console.log(`Loaded mjsr version: %c${M.VERSION}`,"text-decoration:underline")},930:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function preprocess(source,options){let lines=source.split(/\n/),lineCount=lines.length,depths={},output="";return traverse(),output.trim();function traverse(currentLine=0,condition=!0,depth=0){for(;currentLine<lineCount;){let line=lines[currentLine];if(line.trim().startsWith("#"))switch(line.trim().substr(1).split(/\s/)[0]){case"if":depths[depth]=condition,currentLine=traverse(currentLine+1,eval(line.trim().substr(3))&&depths[depth],depth+1);break;case"else":currentLine=traverse(currentLine+1,!condition&&depths[depth-1],depth);break;case"endif":currentLine=traverse(currentLine+1,depths[depth-1],depth-1)}else condition&&(output+=`${line}\n`);currentLine++}return currentLine}}__webpack_require__.d(__webpack_exports__,{d:()=>preprocess})}},__webpack_module_cache__={};function __webpack_require__(t){if(__webpack_module_cache__[t])return __webpack_module_cache__[t].exports;var e=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t](e,e.exports,__webpack_require__),e.loaded=!0,e.exports}__webpack_require__.amdO={},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__(889)})();